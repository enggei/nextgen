# setup :

ssh server
mkdir -p .ssh
exit
cat ./goe.pub | ssh server 'cat >> .ssh/authorized_keys'

#set NOPASSWD for 'enge' on server, add line AFTER sudo-users
ssh server
sudo visudo
enge    ALL=(ALL) NOPASSWD: ALL

#install docker-machine on local machine:
curl -L https://github.com/docker/machine/releases/download/v0.15.0/docker-machine-$(uname -s)-$(uname -m) >/tmp/docker-machine &&
    chmod +x /tmp/docker-machine &&
    sudo cp /tmp/docker-machine /usr/local/bin/docker-machine

# use docker-machine to install docker on server:
sudo docker-machine create --driver generic --generic-ip-address=192.168.1.13 --generic-ssh-user=enge --generic-ssh-key ~/.ssh/goe server

# run docker on local machine:
docker-machine ls
docker-machine env server
eval $(docker-machine env server)

# create docker instance on amazon using docker-machine (default location. N.Virginia)
docker-machine create --driver amazonec2 nextgen
# with location:
docker-machine create --driver amazonec2 --amazonec2-region us-west-1 nextgen

# build and deploy:

eval $(docker-machine env server)

# build docker image on other machine (from local machine - in project-folder)
docker build -t nextgen .

# image built, run instance on server
docker run -d -t -v /data:/data -i -p 8090:8090 nextgen